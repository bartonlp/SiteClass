<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Examples Document</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  
  <style>
  div.sourceCode {
    background-color: #EEF3E2;
    border-left: 10px solid gray;
    padding-left: 5px;
  }
  code {
    background-color: #EEF3E2;
  }
  </style>
</head>
<body>
<h1 id="examples">EXAMPLES</h1>
<p>This directory has a number of examples of how to use the framework. I put the 'vendor/bartonlp/site-class/includes' directory in the '/var/www' that Apache2 creates when it is installed on a Ubuntu system. By default the Apache2 install makes '/var/www/html' its DocumentRoot (look at '/etc/apache2/sites-enabled/000-default.conf' the default site configuration file).</p>
<p>The following examples are provided.</p>
<p>The examples require '../vendor/bartonlp/site-class/includes/'.</p>
<ol>
<li><a href="example1.php">example1.php</a> Simplest. No database.</li>
<li><a href="example2.php">example2.php</a> Uses sqlite database.</li>
<li><a href="example3.php">example3.php</a> Uses Database class directly.</li>
<li><a href="example4.php">example4.php</a> Uses siteautoload.class.php</li>
<li><a href="example5.php">example5.php</a> Uses siteautoload.class.php and dbTables class.</li>
</ol>
<p>The next example show insertion and updating of the database and 'dbTables' useage. To have this work you must set the permissions and group on the 'test.sdb' table and on the examples directory:</p>
<h3 id="set-permisions">Set Permisions</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="fu">sudo</span> chgrp www-data test.sdb</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="fu">sudo</span> chmod g+w test.sdb</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="bu">cd</span> ..</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="fu">sudo</span> chgrp www-data examples</a>
<a class="sourceLine" id="cb1-5" title="5"><span class="fu">sudo</span> chmod g+w examples</a></code></pre></div>
<p>Now the following examples should work. All of the following examples need to be able to update the 'test.sdb' database.</p>
<p><a href="example-insert-update.php">example-insert-update.php</a></p>
<h2 id="using-other-libraries">Using Other Libraries</h2>
<h3 id="twig">Twig</h3>
<p>You can use other frameworks or templeting engines. Here we will use <em>Twig</em> a popular templet engine. <em>Twig</em> is a super powerful templet engine with looping and conditional statements and much more. Here we do just about the minimum just as an example.</p>
<p>There is no 'vendor' directory in the examples directory. You will need to run 'composer' to get <em>Twig</em> and <em>Altorouter</em> installed.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1"><span class="ex">composer</span> install</a></code></pre></div>
<p><a href="example-with-twig.php">example-with-twig.php</a></p>
<h3 id="rest-routing-with-altorouter">ReST Routing with Altorouter</h3>
<p>If you need ReST routing (or pretty routing or SEO friendly routing as it is sometime called) you could use one of the popular routing engines available with <em>Meteor</em>, <em>Laravel</em>, <em>Synfony2</em> or <em>Silex</em> but then again by that point you might as well just bite the bullet and spend the hours or days trying to figure out those frameworks.</p>
<p>There is a pretty simple router called <em>Altorouter</em> which can be used without too much work. It is at <a href="https://github.com/dannyvankooten/AltoRouter">https://github.com/dannyvankooten/AltoRouter</a> and can be loaded with <strong>composer</strong> as:</p>
<pre><code>composer require altorouter/altorouter
</code></pre>
<p>The file 'example-route.php' would normally be your 'index.php' in a production environment. When using a server with Apache2 you would need a '.htaccess' file in the directory where the 'index.php' lives. The '.htaccess' file would look like this:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" title="1"><span class="co"># Only rewrite if a real file does not exist.</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="ex">RewriteEngine</span> On</a>
<a class="sourceLine" id="cb4-3" title="3"><span class="ex">RewriteCond</span> %<span class="dt">{REQUEST_FILENAME}</span> !-f</a>
<a class="sourceLine" id="cb4-4" title="4"><span class="ex">RewriteRule</span> . index.php [L]</a></code></pre></div>
<p>This says that if the requested filename does not exist go to the 'index.php' file instead.</p>
<p>To test this without renaming the 'example-route.php' you can use the PHP server like this:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" title="1"><span class="va">HOME=</span>/var/www <span class="ex">php</span> -S localhost:8080 example-route.php</a></code></pre></div>
<p>The PHP server uses the 'example-route.php' file and you don't need a '.htaccess' file.</p>
<p>Prefixing the command with 'HOME=...' sets the 'HOME' environment variable. Have it point to your 'vendor/autoload.php' file.</p>
<p>Now you can run the program. It will display a table and a form you can use to insert new records. Also a button lets you reset the database table to its original state. If you click on a number in the 'ID' column of the table you get an edit page where you can change the names.</p>
<p>You can also get to the edit page by entering the URI '/edit/3' for example. That will take you to the edit page for 'ID' three. From that page you and enter the URI '/home' which will take you back to the home page.</p>
<p>The advantage of ReST is you do not actually need a '/edit/3' or a '/home' directory on your system. These are just syntactical links to control logic and as a result are easily modified. Also some people think that '/edit/3' somehow looks cooler then '?edit=3', I am not sure I agree. ReST is syntactical sugar that takes more code and obfuscates what is really going on.<br />
But that is just my opinion.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Have fun with my mini framework. Get in there and look at the code, there really isn't that much of it. Try it out and if you have any comments or suggestions please let me know.</p>
<h2 id="contact-me-barton-phillips">Contact Me <a href="mailto:bartonphillips@gmail.com">Barton Phillips</a></h2>
<h2 id="my-homepage-is-httpwwwbartonphillipscom">My homepage is <a href="http://www.bartonphillips.com">http://www.bartonphillips.com</a></h2>
</body>
</html>
